<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-5899C1DJM0"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5899C1DJM0");</script><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="apple-touch-icon" sizes="57x57" href="/roulette/apple-icon-57x57.d2489b05.png"><link rel="apple-touch-icon" sizes="60x60" href="/roulette/apple-icon-60x60.c256c4c3.png"><link rel="apple-touch-icon" sizes="72x72" href="/roulette/apple-icon-72x72.3c7457a3.png"><link rel="apple-touch-icon" sizes="76x76" href="/roulette/apple-icon-76x76.c458ac0e.png"><link rel="apple-touch-icon" sizes="114x114" href="/roulette/apple-icon-114x114.2a406841.png"><link rel="apple-touch-icon" sizes="120x120" href="/roulette/apple-icon-120x120.baa4374c.png"><link rel="apple-touch-icon" sizes="144x144" href="/roulette/apple-icon-144x144.b352f2ad.png"><link rel="apple-touch-icon" sizes="152x152" href="/roulette/apple-icon-152x152.3ed1a2e0.png"><link rel="apple-touch-icon" sizes="180x180" href="/roulette/apple-icon-180x180.1794adb6.png"><link rel="icon" type="image/png" sizes="192x192" href="/roulette/android-icon-192x192.1cb445bf.png"><link rel="icon" type="image/png" sizes="32x32" href="/roulette/favicon-32x32.ca213894.png"><link rel="icon" type="image/png" sizes="96x96" href="/roulette/favicon-96x96.0b3c763e.png"><link rel="icon" type="image/png" sizes="16x16" href="/roulette/favicon-16x16.e4bfc49f.png"><link rel="manifest" href="/roulette/assets/manifest.webmanifest"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/roulette/assets/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><title>Marble Roulette</title><style>@font-face{font-family:LINESeedKR-Bd;src:url(https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_11-01@1.0/LINESeedKR-Bd.woff2)format("woff2");font-weight:700;font-style:normal}*{box-sizing:border-box;font-family:LINESeedKR-Bd}body{margin:0}canvas{width:100%;height:100%;position:fixed;inset:0}input[type=number]::-webkit-outer-spin-button,input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}#container{z-index:50;width:100%;justify-content:center;align-items:center;transition:all 1s ease-in-out;display:flex;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#rankings{z-index:10;color:#000;min-height:40vh;width:25%;height:20%;background:#fff;border:2px solid #f38c0e;border-radius:.75rem;flex-direction:column;align-items:center;padding:.8rem 3rem;font-size:3vh;font-weight:700;transition:all 1s ease-in-out;display:flex;box-shadow:inset 0 0 6rem 4px #fff5ef}#rankings ul{margin:0;padding:0;list-style-type:none;position:relative;bottom:-2rem}#rankings h2{margin:0;position:relative;top:0}.settings{backdrop-filter:blur(10px);color:#000;z-index:11;background:#d9a84e;border:2px solid #f38c0e;border-radius:.75em;padding:1rem;font-size:1rem;font-weight:300;transition:all 1s ease-in-out;box-shadow:inset 0 0 6rem 4px #f27127}.hide{display:none!important}.hideY{transform:translate(-50%,-300%)!important}.settings:focus-within{box-shadow:inset 0 0 2rem 4px #f27127}.settings textarea{width:100%;min-height:22rem;font:inherit;color:inherit;background-color:#0000;border:none;outline:none}.settings .actions{text-align:right;justify-content:space-between;font-size:.8rem;display:flex}.settings .buttons{justify-content:space-between;gap:.5rem;display:flex}.settings .actions label{justify-content:center;align-items:center;font-size:1.1rem;display:flex}.settings button{border:0;border-radius:10px;flex-grow:1;padding:.25rem .75rem;font-size:1rem}.settings button:hover{cursor:pointer;background-color:#dadada}.settings .text{color:#000;margin-top:0;font-size:1rem;line-height:1.2rem}input[type=number]{width:3rem;text-align:center;font:inherit;color:inherit;border:none;outline:none;margin-left:.2rem;margin-right:.2rem}#inGame{width:fit-content}div.copyright{color:#fff;z-index:999;font-size:12px;position:fixed;bottom:0;left:50%;transform:translate(-50%)}div.copyright a{color:#fff}#btnShake{font-size:2em}#cameraInfo{color:#fff;z-index:50;position:absolute;bottom:10px;left:10px}#cameraInfo span{display:none}#cameraInfo span.free{display:block!important}</style></head><body> <script type="module" src="/roulette/index.ff8d850a.js"></script> <script type="text/javascript">function getNames(){return document.querySelector("#in_names").value.trim().split(/[,\r\n]/g).map((e=>e.trim())).filter((e=>!!e))}function parseName(e){const n=/(\/\d+)/,t=/(\*\d+)/,r=n.test(e),a=t.test(e);return{name:/^\s*([^\/*]+)?/.exec(e)[1],weight:r?parseInt(n.exec(e)[1].replace("/","")):1,count:a?parseInt(t.exec(e)[1].replace("*","")):1}}function getReady(){const e=getNames();window.roullete.setMarbles(e),ready=e.length>0}function setWinnerRank(e){document.querySelector("#in_winningRank").value=e,window.options.winningRank=e-1,window.roullete.setWinningRank(window.options.winningRank)}function getRank(){const e=getNames();let n=new Object,t=[];if(e.length>0){for(var r in e.forEach((e=>{let t=parseName(e);Object.keys(n).includes(t.name)?n[t.name].count+=t.count:n[t.name]={name:t.name,count:t.count}})),n)t.push(n[r]);for(var a in t.sort((function(e,n){return n.count-e.count})),t)t[a].rank=Number(a)+1;return t}}function inputNameFn(){const e=getNames(),n=new Set,t={};e.forEach((e=>{const r=parseName(e),a=r.weight>1?`${r.name}/${r.weight}`:r.name;n.has(a)||(n.add(a),t[a]=0),t[a]+=r.count}));const r=[];Object.keys(t).forEach((e=>{t[e]>1?r.push(`${e}*${t[e]}`):r.push(e)})),e.length>0?(document.querySelector("#rankings").style.transform="translate(0, 0)",document.querySelector("#settings").style.transform="translate(0, 0)"):(document.querySelector("#rankings").style.transform="translate(-50%, -0%)",document.querySelector("#settings").style.transform="translate(50%, -0%)"),""==!document.querySelector("#in_names").value&&(document.querySelector("#in_names").value=r.join(",")+","),renderRank(),getReady()}function renderRank(){const e=getRank(),n=document.querySelector("#rankings > ul");if(n.replaceChildren(),e)for(var t in e){if(t>4)return void console.log("it's over Out!");const r=document.createElement("li");r.innerText=`#${e[t].rank} ${e[t].name} ${e[t].count}개`,n.appendChild(r)}}let ready=!1;var keyPressed={};document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("keydown",(e=>{document.querySelector("#container").classList.contains("hideY")&&("Space"==e.code&&window.roullete.shake(),"KeyV"==e.code&&(window.roullete._camera.setSelfCam(!window.roullete._camera.selfCam),document.querySelector("#cameraInfo span").classList.contains("free")?document.querySelector("#cameraInfo span").classList.remove("free"):document.querySelector("#cameraInfo span").classList.add("free")),window.roullete._camera.selfCam&&(window.roullete._camera.keyPressed[e.code]=!0))})),window.addEventListener("keyup",(e=>{document.querySelector("#container").classList.contains("hideY")&&window.roullete._camera.selfCam&&(window.roullete._camera.keyPressed[e.code]=!1)})),document.querySelector("#marbleUnit").value=54,document.querySelector("#in_names").addEventListener("input",(e=>{","==e.data&&inputNameFn()})),document.querySelector("#in_names").addEventListener("blur",(()=>{inputNameFn()})),document.querySelector("#btnShuffle").addEventListener("click",(()=>{inputNameFn()})),document.querySelector("#btnStart").addEventListener("click",(()=>{""==!document.querySelector("#in_names").value&&(document.querySelector("#container").classList.add("hideY"),ready&&(gtag("event","start",{event_category:"roulette",event_label:"start",value:window.roullete.getCount()}),window.roullete.start()))})),document.querySelector("#chkSkill").addEventListener("change",(e=>{window.options.useSkills=e.target.matches(":checked"),window.roullete.setWinningRank(window.options.winningRank)})),document.querySelector("#in_winningRank").addEventListener("change",(e=>{const n=parseInt(e.target.value,10);setWinnerRank(isNaN(n)?0:n)})),document.querySelector("#btnRandomWinner").addEventListener("click",(()=>{const e=window.roullete.getCount();setWinnerRank(Math.floor(Math.random()*e+1))})),document.querySelector("#btnFirstWinner").addEventListener("click",(()=>{window.roullete.getCount();setWinnerRank(1)})),document.querySelector("#btnLastWinner").addEventListener("click",(()=>{setWinnerRank(window.roullete.getCount())})),document.querySelector("#btnShake").addEventListener("click",(()=>{window.roullete.shake(),gtag("event","shake",{event_category:"roulette",event_label:"shake",value:1})})),window.roullete.addEventListener("goal",(()=>{ready=!1,document.querySelector("#container").classList.remove("hideY"),window.roullete._camera.setSelfCam(!1)})),window.roullete.addEventListener("shakeAvailableChanged",(e=>{document.querySelector("#inGame").classList.toggle("hide",!e.detail)})),document.querySelector("#btnShuffle").click()}));</script> <div id="container"> <div id="settings" class="settings"> <p class="text"> 각 이름 뒤에 별과 슬래시를 붙여 각 구슬의 수와 가중치를 설정할 수 있습니다. (ex: Tom*2, Jane/5)<br> 후원 메세지 내의 슬래시와 별은 자동으로 제거됩니다.(ex: Tom*2 -> Tom2)<br> </p> <textarea id="in_names" placeholder="쉼표나 줄로 구분된 텍스트를 입력하세요"></textarea> <div class="actions"> <div class="buttons"> <label> 별풍선 <input type="number" id="marbleUnit">개 = 구슬 1 개 <span id="marbleUnitEx"></span> </label> </div> </div> <div class="actions"> <div class="buttons"> <label> 당첨 순위는 <input type="number" id="in_winningRank" value="1" min="1">번째 구슬 입니다 </label> <div class="buttons"> <button id="btnFirstWinner">1등</button> <button id="btnLastWinner">꼴등</button> <button id="btnRandomWinner">랜덤</button> </div> </div> <div class="buttons"> <label> <input type="checkbox" id="chkSkill" checked> 스킬 사용 </label>  <button id="btnStart">시작</button> <button id="btnShuffle">셔플</button> </div> </div>  </div> <div id="rankings"> <h2 style="text-align:center">랭킹</h2> <ul></ul> </div> </div> <div id="inGame" class="hide settings"> <button id="btnShake">Shake!</button> </div> <div id="cameraInfo"> <span>자유시점 ON</span> V 키를 누르면 카메라 모드가 전환됩니다<br>스페이스바 키를 누르면 맵을 흔들 수 있습니다 </div> <div class="copyright"> &copy; 2023.<a href="https://lazygyu.net" target="_blank">lazygyu</a> </div> </body></html>